#pragma checksum "D:\YNK_Crm\WebManage\Areas\Admin\Views\Manage\ContracUser\CourseDetail.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "5d8c7da766dff40867142c8b7298f0de5deea8e4"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Areas_Admin_Views_Manage_ContracUser_CourseDetail), @"mvc.1.0.view", @"/Areas/Admin/Views/Manage/ContracUser/CourseDetail.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "D:\YNK_Crm\WebManage\Areas\Admin\Views\_ViewImports.cshtml"
using WebManage;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "D:\YNK_Crm\WebManage\Areas\Admin\Views\_ViewImports.cshtml"
using WebManage.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "D:\YNK_Crm\WebManage\Areas\Admin\Views\_ViewImports.cshtml"
using ADT.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "D:\YNK_Crm\WebManage\Areas\Admin\Views\_ViewImports.cshtml"
using ADT.Common;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"5d8c7da766dff40867142c8b7298f0de5deea8e4", @"/Areas/Admin/Views/Manage/ContracUser/CourseDetail.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"9e00094c6873c7f1dd971a491bd11b241da9ff38", @"/Areas/Admin/Views/_ViewImports.cshtml")]
    public class Areas_Admin_Views_Manage_ContracUser_CourseDetail : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            WriteLiteral("<div class=\"layui-tab layui-tab-card\" lay-filter=\"tabCourseDetail\" style=\"margin:10px\">\r\n    <input type=\"hidden\" name=\"studentUid\"");
            BeginWriteAttribute("value", " value=\"", 131, "\"", 158, 1);
#nullable restore
#line 2 "D:\YNK_Crm\WebManage\Areas\Admin\Views\Manage\ContracUser\CourseDetail.cshtml"
WriteAttributeValue("", 139, ViewBag.StudentUid, 139, 19, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(@" />
    <ul class=""layui-tab-title"">
        <li class=""layui-this"">课程统计</li>
        <li>课程明细</li>
    </ul>
    <div class=""layui-tab-content"" style=""padding:0px;"">
        <div class=""layui-tab-item layui-show"" style=""padding-top:10px"" id=""UseTotal"">


        </div>
        <div class=""layui-tab-item"" style=""padding-top:10px"">
            <div class=""layui-form"">
                <div style=""display:flex;flex-wrap:wrap;"">
                    <div style=""display:flex"">
                        <label class=""layui-form-label w-auto"">开始时间：</label>
                        <input type=""text"" class=""layui-input"" name=""StartTime"" id=""StartTime"" style=""flex:1;"" />
                        <label class=""layui-form-label w-auto"">截止时间：</label>
                        <input type=""text"" class=""layui-input"" name=""EndTime"" id=""EndTime"" style=""flex:1"" />
                        <label class=""layui-form-label w-auto"">分类：</label>
                        <select name=""SubjectId"" class=""layui-select"" lay-fil");
            WriteLiteral(@"ter=""SubjectId"" id=""SubjectId""></select>
                        <label class=""layui-form-label w-auto"">科目：</label>
                        <select name=""ProjectId"" class=""layui-select"" id=""ProjectId""></select>
                        <button id=""btnSearch"" class=""layui-btn icon-btn"" style=""margin-left:6px""><i class=""layui-icon"">&#xe615;</i>搜索</button>
                    </div>
                    <div style=""flex: 1;line-height:39px;text-align:center;font-weight:600"">
                        <label id=""totalCourseTime""></label>
                    </div>
                </div>
            </div>
            <table class=""layui-table"" id=""userTable"" lay-filter=""userTable""></table>
        </div>
    </div>
</div>
<style>
    .leftTotalItem {
        margin-top: 10px;
        box-shadow: rgb(247 242 242) 1px 1px inset;
        line-height: 36px;
        padding-left: 10px;
        display: flex;
    }
        .leftTotalItem .item {
          width:120px;
        }
</style>
");
            DefineSection("js", async() => {
                WriteLiteral(@"
    <script type=""text/html"" id=""templateItem"">
        {{each data item index}}
        {{if item.ClassId>0}}
        <div class=""leftTotalItem"">
            <div>
                <span style=""font-weight: 700"">小班:{{item.Class_Name}}</span>
            </div>
            <div class=""item"" style=""margin-left:30px"">分类:{{item.SubjectName}}</div>
            <div class=""item"">已充课时:{{item.Class_Course_Time}}</div>
            <div class=""item"">使用课时:{{item.Class_Course_UseTime}}</div>
            <div class=""item"">还剩课时:{{item.Class_Course_Time-item.Class_Course_UseTime}}</div>
        </div>
        {{else}}
        <div class=""leftTotalItem"">
            <div>
                <span style=""font-weight:700"">1对1:{{item.SubjectName}}</span>
            </div>
            <div class=""item"" style=""margin-left:30px"">科目:{{item.ProjectName}}</div>
            <div class=""item"">已充课时:{{item.Course_Time}}</div>
            <div class=""item"">使用课时:{{item.Course_UseTime}}</div>
            <div class=""item");
                WriteLiteral(@""">还剩课时:{{item.Course_Time-item.Course_UseTime}}</div>
        </div>
        {{/if}}
        {{/each}}
    </script>
    <script type=""text/javascript"">
        layui.use(['adminList', 'element', 'adminForm', 'laydate', 'form'], function () {
        var adminList = layui.adminList;
        var element = layui.element;
        var adminForm = layui.adminForm;
        var laydate = layui.laydate;
        var form = layui.form;
        laydate.render({
            elem: '#StartTime',
            type: 'date'
        });
        laydate.render({
            elem: '#EndTime',
            type: 'date'
        });

        adminForm.load({
            url: """);
#nullable restore
#line 90 "D:\YNK_Crm\WebManage\Areas\Admin\Views\Manage\ContracUser\CourseDetail.cshtml"
             Write(Url.Action("QuerySubject","ContracUser"));

#line default
#line hidden
#nullable disable
                WriteLiteral(@""",
            dataType: 'json',
            callBack: function (rou) {
                    if (rou.data != null) {
                        var result = rou.data;
                        $(""select[name='SubjectId']"").html(""<option value='0'>-分类-</option>"");
                        $(""select[name='ProjectId']"").html(""<option value='0'>-科目-</option>"");
                        for (var i = 0; i < result.length; i++) {
                            $(""select[name='SubjectId']"").append('<option value = ' + result[i].SubjectId + '>' + result[i].SubjectName + '</option>');
                        }
                    }
                }
            });
        form.on('select(SubjectId)', function (data) {
                var sujectId=data.value;
                adminForm.load({
                url: """);
#nullable restore
#line 106 "D:\YNK_Crm\WebManage\Areas\Admin\Views\Manage\ContracUser\CourseDetail.cshtml"
                 Write(Url.Action("QueryProject", "ContracUser"));

#line default
#line hidden
#nullable disable
                WriteLiteral(@"?subjectId="" + sujectId,
                dataType: 'json',
                    callBack: function (rou) {
                     $(""select[name='ProjectId']"").html(""<option value='0'>-科目-</option>"");
                        if (rou.data != null) {
                            var result = rou.data;
                            for (var i = 0; i < result.length; i++) {
                                $(""select[name='ProjectId']"").append('<option value = ' + result[i].ProjectId + '>' + result[i].ProjectName + '</option>');
                            }
                        }
                    }
                });
            });
        var initable=adminList.tableLayUI({
                elem: '#userTable',
                url: '");
#nullable restore
#line 121 "D:\YNK_Crm\WebManage\Areas\Admin\Views\Manage\ContracUser\CourseDetail.cshtml"
                 Write(Url.Action("QueryWorkDetailSource"));

#line default
#line hidden
#nullable disable
                WriteLiteral(@"',
                page: true,
                where: {
                    studentUid:$(""input[name='studentUid']"").val(),startStr: $(""input[name='StartTime']"").val(), endStr: $(""input[name='EndTime']"").val()
                },
                cellMinWidth: 100,
                cols: [[
                    { type: 'numbers' },
                    {
                        field: 'Work_Title', title: '上课科目', sort: true, templet: function (d) {
                            if (d.ClasssId > 0) {
                                return d.Work_Title + "" - "" + d.SubjectName;
                            }
                            else {
                                return d.Work_Title;
                            }
                        }
                    },
                    {
                        field: 'AT_Date', title: '上课日期', sort: true, width: 120, templet: function (d) {
                            return dateFtt(""yyyy-MM-dd"", d.AT_Date);
                        }
        ");
                WriteLiteral(@"            },
                    {
                        field: 'StartTime', title: '时间段', sort: true, width: 120, templet: function (d) {
                            return d.StartTime + "" - "" + d.EndTime;
                        }
                    },
                    { field: 'CourseTime', title: '课时', sort: true, width: 120 },
                    { field: 'TeacherName', title: '教师', sort: true, width: 120 },
                    { field: 'RoomName', title: '教室', sort: true, width: 120 },
                ]],
                parseData: function (res) {
                    if (res.totalRow != null)
                        $(""#totalCourseTime"").text($(""#txtTitle"").val() + ""已上课时："" + res.totalRow.totalCourseTime + ""h"");
                    else
                        $(""#totalCourseTime"").text("""");
                }
        });
        function initTotal() {
            adminForm.load({
            url: """);
#nullable restore
#line 162 "D:\YNK_Crm\WebManage\Areas\Admin\Views\Manage\ContracUser\CourseDetail.cshtml"
             Write(Url.Action("QueryStudentTotal", "ContracUser"));

#line default
#line hidden
#nullable disable
                WriteLiteral(@""",
            data:{studentUid: $(""input[name='studentUid']"").val()},
            dataType: 'json',
            callBack: function (rou) {
                if (rou.data != null) {
                    console.log(rou.data);
                        var result = rou.data;
                        var html = template(""templateItem"", { data: result});
                        document.getElementById(""UseTotal"").innerHTML = html;
                    }
                }
            });
        }
        initTotal();
        element.on('tab(tabCourseDetail)', function (data) {
            if (data.index == 0) {
                initTotal();
            } else if (data.index == 1) {
                initable.reload({
                    where: {
                        studentUid:$(""input[name='studentUid']"").val(), startStr: $(""input[name='StartTime']"").val(), endStr: $(""input[name='EndTime']"").val(),
                        subjectId: $(""select[name='SubjectId']"").val(), projectId: $(""select[name='P");
                WriteLiteral(@"rojectId']"").val()
                    }
                });
            }
        });
        $(""#btnSearch"").click(function () {
            initable.reload({
                where: {
                    studentUid: $(""input[name='studentUid']"").val(), startStr: $(""input[name='StartTime']"").val(), endStr: $(""input[name='EndTime']"").val(),
                    subjectId: $(""select[name='SubjectId']"").val(), projectId: $(""select[name='ProjectId']"").val()
                }
            });

        });
    });

    function dateFtt(fmt, val) { //author: meizz
        var date = new Date(val);
        var o = {
            ""M+"": date.getMonth() + 1,     //月份
            ""d+"": date.getDate(),     //日
            ""h+"": date.getHours(),     //小时
            ""m+"": date.getMinutes(),     //分
            ""s+"": date.getSeconds(),     //秒
            ""q+"": Math.floor((date.getMonth() + 3) / 3), //季度
            ""S"": date.getMilliseconds()    //毫秒
        };
        if (/(y+)/.test(fmt))
      ");
                WriteLiteral(@"      fmt = fmt.replace(RegExp.$1, (date.getFullYear() + """").substr(4 - RegExp.$1.length));
        for (var k in o)
            if (new RegExp(""("" + k + "")"").test(fmt))
                fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : ((""00"" + o[k]).substr(("""" + o[k]).length)));
        return fmt;
    }
    </script>
");
            }
            );
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; }
    }
}
#pragma warning restore 1591
